# 创建集群

本文介绍如何通过{{dashboard_ent.name}}创建集群。

## 操作步骤

按以下方式创建集群：

1. 在{{dashboard_ent.name}}页面顶部，单击**集群管理**。
2. 在集群管理页面，单击**创建集群**标签。
3. 输入**集群名称**，最大可输入 15 个字符。
4. 选择{{nebula.name}}安装版本。

  !!! note

      - 如果是首次创建集群，或者没有所需的安装包，需要手动上传安装包。详情参见[安装包管理](../system-settings/manage-package.md)。
      - 创建 3.5.0 以下版本的集群时，需要手动上传 License 证书。

5. （可选）单击**Zone**右侧开关，可以为集群启用 Zone 功能。
   
  !!! note

      - 仅 3.6.0 及以上版本{{nebula.name}}支持 Zone 功能。
      - Zone 是 Storage 节点的逻辑机架。可通过 Zone 将多个 Storage 节点划分成可管理的逻辑区域，实现资源隔离；同时通过控制 Graph 服务访问指定的 Zone 内的副本数据，减少流量消耗，提高访问效率。
      - 添加节点和服务后，Zone 内会显示所拥有的节点启用的服务数量。
      - 集群创建后无法再开启或关闭 Zone 功能。
      - 创建集群时如果要删除 Zone，需要确保 Zone 内没有节点。集群创建后无法修改或删除 Zone。
      - 建议 Zone 的数量设置为奇数以保证可以选举出 leader。集群创建后无法修改 Zone 的数量。
      - 关于{{nebula.name}}中 Zone 的注意事项和使用方法，请参见[管理 Zone](../../4.deployment-and-installation/5.zone.md)。

  - 可以设置**开启定向访问 Zone 功能**。
  - 单击**添加 Zone**，输入 Zone 名称。可以添加多个 Zone。

6. 添加节点信息，提供两种方式：

  - **添加节点**，输入待添加节点的 Host 信息、SSH 端口号、SSH 用户、认证方式、安装包等。

    关于认证方式的说明如下：

    - SSH 密码：输入 SSH 用户对应的密码。

    - SSH 密钥：单击**上传**，选择节点的私钥文件。需要提前在待添加节点上生成密钥文件，并将私钥发送给当前电脑（非{{dashboard_ent.name}}机器）。如果设置了短密码（passphrase），也需要填写。  

  ![cluster](https://docs-cdn.nebula-graph.com.cn/figures/create-cluster-221115_cn.png)

  - **批量导入节点**，批量添加多个节点的相关信息。批量导入需要先选择安装包后单击**下载 CSV 模版**。按照模版填写后上传，尽量确保节点信息正确，否则容易造成上传失败。

7. 勾选节点并在节点右上方，单击需要添加的服务。创建集群需要给节点添加 3 种类型的服务。如果不熟悉{{nebula.name}}架构，建议单击**自动添加服务**按钮。

   ![add-service](https://docs-cdn.nebula-graph.com.cn/figures/add-service-2022-04-08_cn.png)

8. （可选）在下方的服务中，选择编辑 Meta、Graph、Storage 服务的端口号、HTTP 端口号，单击**确认**保存。

9. （可选）在下方单击**高级配置**，可以修改服务的运行日志存储路径、日志详细级别、HTTP 服务地址和数据存储路径。用户还可以单击**新增配置**，自行添加服务配置。

10.  单击**创建集群**，确定配置信息无误且节点无冲突后，单击**确认**。

11.    在集群管理页面中的列表中出现状态为`installing`的集群，需等待 3-10 分钟，状态变为`healthy`即集群创建成功。如果服务状态为`unhealthy`，表示集群服务中存在非正常运行的服务，请单击**详情**进行查看。

## 后续操作

成功创建集群后，用户可以对集群进行操作，详情见[集群操作](../4.cluster-operator/operator/node.md)。
